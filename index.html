<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Big Games API Hub</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <style>
        body { background-color: #fffbcc; color: #333; }
        header { text-align: center; background: linear-gradient(45deg, #ff6b6b, #ffa502); padding: 1rem; color: white; border-radius: 10px; }
        .grid { margin-top: 20px; }
        .card { padding: 1rem; border-radius: 10px; background-color: white; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <header>
        <h1>Big Games API Hub</h1>
        <p>Explore collections, clans, and stats from the Big Games universe!</p>
    </header>
<main class="container">
    <h2>Game Collections</h2>
    <ul id="collections-container">Loading...</ul>  <!-- ✅ This is where data will appear -->
</main>


   <script>
async function fetchData(endpoint, containerId) {
    const url = `/api?url=${encodeURIComponent(endpoint)}`; // ✅ FIXED URL
    console.log("Fetching data from:", url);
    const container = document.getElementById(containerId);

    try {
        const response = await fetch(url);
        if (!response.ok) throw new Error(`HTTP Error ${response.status}`);
        const data = await response.json();
        console.log("API Response:", data);

        // ✅ FIXED: Ensure we're correctly accessing the data
        if (data && data.data && Array.isArray(data.data)) {
            container.innerHTML = `<ul>${data.data.map(item => `<li>${item}</li>`).join("")}</ul>`;
        } else {
            container.innerHTML = "<p class='error'>Unexpected API response format.</p>";
        }
    } catch (error) {
        console.error("API Fetch Error:", error);
        container.innerHTML = `<p class='error'>Failed to load data.</p>`;
    }
}

// ✅ Call the function when the page loads
document.addEventListener("DOMContentLoaded", () => {
    fetchData("https://ps99.biggamesapi.io/api/collections", "collections-container");
});
</script>

</body>
</html>
